h3(ng-init='initVariables()')
  .container-fluid.row
    .col-xs-6.col-sm-8.col-lg-6
      span(ng-if="dados.SLP_TIPO_DESC") {{dados.SLP_TIPO_DESC}}&nbsp;
      span {{dados.SLP_NOME}}

    .col-xs-4.col-sm-2.col-lg-5.text-right
      ul.tags
        li(ng-repeat="tag in tagsModel.data")
          div
            a(ui-sref= "app.favorites.folder({folderName:'{{tag.id}}'})") {{tag.id}}
            | &nbsp&nbsp&nbsp
            a(ng-click="removeTag(tag.id, dados.SLP_NOME)")
              span.fa.fa-close
    .col-xs-2.col-sm-2.col-lg-1.text-right
      div.multiselect-parent.btn-group.dropdown-multiselect(id="DropdownTagsList")
        button.dropdown-toggle.btn.btn-default(type="button", ng-click="toggleDropdown()")
          span.fa.fa-tag
        ul.dropdown-menu.dropdown-menu-form.dropdown-menu-right(ng-style="{display: open ? \'block\' : \'none\', height : 200 }", style="overflow: auto")
          li.dropdown-header
            input.form-control(type="text", style="width:, 100%;", ng-model="searchFilter", placeholder="Buscar...")
          li.divider
          li(role="presentation", ng-repeat="tag in tagsData.data | filter: searchFilter")
            a(role="menuitem" tabindex="-1" ng-click="setSelectedItem(getPropertyForObject(tag,'id'), dados.SLP_NOME)")
              span(data-ng-class="{'fa fa-check': isChecked(getPropertyForObject(tag,'id'))}") {{getPropertyForObject(tag, 'id')}}
          li.divider(ng-show="searchFilter")
          li(ng-show="searchFilter")
            a(role="menuitem" tabindex="-1" ng-click="createTag(searchFilter, dados.SLP_NOME)") Criar {{searchFilter}}


.container-fluid
  //FIRST COLUMN
  .col-md-6
    .row
      //GENERAL INFO VIEW START
      .col-md-12
        .panel.widget
          .panel-heading
            h3 Informações Gerais


          .panel-body
            .form-horizontal
              .form-group.m0.custom-stripe
                .col-sm-3.control-label-sm.m0
                  label Autor Principal:
                .col-sm-9.form-control-static-sm.m0
                  //author doesn't have id
                  p(ng-if="! dados.SLP_AUTORES[0]._id") {{dados.SLP_AUTORES[0].SLPa_NOME_FANTASIA}}
                  //author has id
                  a(ui-sref="app.representative({ id: '{{dados.SLP_AUTORES[0]._id}}' })", ng-if="dados.SLP_AUTORES[0]._id") {{dados.SLP_AUTORES[0].SLPa_NOME_FANTASIA}}

                  //icon to show coauthors
                  span(ng-show="dados.SLP_AUTORES.length > 1 && coAuthorsCollapsed", ng-click="coAuthorsCollapsed = !coAuthorsCollapsed")
                    em.fa.fa-plus-circle.sigalei-color(ng-show="coAuthorsCollapsed" alt="Mostrar co-autores")
                  span(ng-show="dados.SLP_AUTORES.length > 1 && !coAuthorsCollapsed", ng-click="coAuthorsCollapsed = !coAuthorsCollapsed")
                    em.fa.fa-minus-circle.sigalei-color(ng-show="!coAuthorsCollapsed" alt="Esconder co-autores")

              //coauthors view, showing only if there are more than one author
              .form-group.m0.custom-stripe(ng-show="!coAuthorsCollapsed")
                .col-sm-3.control-label-sm.m0
                  label Coautores:
                .col-sm-9.form-control-static-sm.m0
                  div(ng-show="!$first" ng-repeat="coauthor in dados.SLP_AUTORES")
                    span(ng-if="!coauthor._id") {{coauthor.SLPa_NOME_FANTASIA}}
                    a(ui-sref="app.representative({ id: '{{coauthor._id}}' })", ng-if="coauthor._id") {{coauthor.SLPa_NOME_FANTASIA}}

              .form-group.m0
                .col-sm-3.control-label-sm.m0
                  label Apreciação:
                .col-sm-9.form-control-static-sm.m0
                  p {{dados.SLP_APRECIACAO || '-'}}

              .form-group.m0.custom-stripe
                .col-sm-3.control-label-sm.m0
                  label Regime de Tramitação:
                .col-sm-9.form-control-static-sm.m0
                  p {{dados.SLP_REGIME_TRAMITACAO || '-'}}

              .form-group.m0
                .col-sm-3.control-label-sm.m0
                  label Tema:
                .col-sm-9.form-control-static-sm.m0
                  p {{dados.SLP_SL_TEMA || "-"}}

              .form-group.m0.custom-stripe
                .col-sm-3.control-label-sm.m0
                  label Subtema:
                .col-sm-9.form-control-static-sm.m0
                  p {{dados.SLP_SL_SUBTEMA}}

              .form-group.m0
                .col-sm-3.control-label-sm.m0
                  label Ementa:
                .col-sm-9.form-control-static-sm.m0
                  p {{dados.SLP_EMENTA}}

              .form-group.m0.custom-stripe(ng-if="dados.SLP_EXPLICACAO_EMENTA")
                .col-sm-3.control-label-sm.m0
                  label Explicação:
                .col-sm-9.form-control-static-sm.m0
                  p {{dados.SLP_EXPLICACAO_EMENTA}}
      //GENERAL INFO VIEW END

      //TRAMIT VIEW START
      .col-md-12
        .panel.widget.bill-box
          .panel-heading
            h3 Tramitações
          .panel-body
            div(ng-repeat="tramitacao in tracksBill")
              ul(ng-class="timelineAlt ? 'timeline-alt' : 'timeline'", ng-init="timelineAlt=true")
                li.timeline-separator(ng-if="$index == 0 || tracksBill[$index].doc.SLT_DATA_TRAMITACAO.substring(0,4) != tracksBill[$index-1].doc.SLT_DATA_TRAMITACAO.substring(0,4)" data-datetime="{{tramitacao.doc.SLT_DATA_TRAMITACAO.replace(' ', 'T') | date: 'yyyy'}}")
                // START timeline item
                li
                  .timeline-panel
                    .pull-left.timeline-custom-date.text-center {{tramitacao.doc.SLT_DATA_TRAMITACAO.replace(" ", "T") | date: 'MMM dd' | capitalize}}
                    .timeline-custom-badge
                    .popover(ng-class="timelineAlt ? 'right' : 'left'")
                      h4.popover-title(ng-if="tramitacao.doc.SLT_ORGAO_ORIGEM_DESC")
                        span.pull-right {{tramitacao.doc.SLT_CASA_TRAMITACAO}}
                        | {{tramitacao.doc.SLT_ORGAO_ORIGEM_DESC}}
                      .arrow
                      .popover-content
                        p {{tramitacao.doc.SLT_DESCRICAO_TRAMITACAO || "Sem descrição"}}
                      a(ng-if="tramitacao.doc.SLT_LINK_INTEIRO_TEOR", ng-click="viewDoc( tramitacao.doc.SLT_LINK_INTEIRO_TEOR , dados.SLP_STATUS.MG)")
                        .popover-footer.text-center
                          em.icon-doc
                          label Inteiro Teor

      //TRAMIT VIEW END
  //FIRST COLUMN END

  //SECOND COLUMN
  .col-md-6
    .row
      //GENERAL STATUS VIEW START
      .col-md-12
        .panel.widget
          .panel-heading
            h3 Situação Geral

          .panel-body
            .form-horizontal
              .form-group.custom-stripe.m0
                .col-sm-3.control-label-sm.m0
                  label Apresentação:
                .col-sm-9.form-control-static-sm.m0
                  p {{dados.SLP_DATA_APRESENTACAO | date:'dd/MM/yyyy'}}

              .form-group.m0
                .col-sm-3.control-label-sm.m0
                  label Última Ação:
                .col-sm-9.form-control-static-sm.m0
                  p {{dados.SLP_DATA_ATUALIZACAO | date:'dd/MM/yyyy'}}

            div(ng-repeat="(house, data) in dados.SLP_STATUS", ng-show="data.FASE != -1")

              h4 {{ house | houseFullName}}
              .form-horizontal
                .form-group.custom-stripe.m0(ng-if="data.ORG_DESC")
                  .col-sm-3.control-label-sm.m0
                    label Órgão Responsável:
                  .col-sm-9.form-control-static-sm.m0
                    p
                      span(ng-if="data.ORGAO") {{data.ORGAO}} - &nbsp;
                      | {{data.ORG_DESC}}

                .form-group.m0(ng-if="data.FASE && data.FASE != '---' ")
                  .col-sm-3.control-label-sm.m0
                    label Fase:
                  .col-sm-9.form-control-static-sm.m0
                    p {{data.FASE}}

                .form-group.custom-stripe.m0(ng-if="data.DATA")
                  .col-sm-3.control-label-sm.m0
                    label Última Ação:
                  .col-sm-9.form-control-static-sm.m0
                    p {{data.DATA | date:'dd/MM/yyyy'}}

                .form-group.m0(ng-if="data.DESC")
                  .col-sm-3.control-label-sm.m0
                    label Status:
                  .col-sm-9.form-control-static-sm.m0
                    p {{data.DESC}}
      //GENERAL STATUS VIEW END

      // DOCS START
      .col-md-12
        .panel.widget
          .panel-heading
            h3 Documentos
          .panel-body
            .form-group(ng-if="dados.SLP_DOCUMENTOS.length > 0")
              table.table.table-bordered.table-striped(ng-table='docsTableParams', show-filter="true")
                tbody
                  tr(ng-repeat="doc in $data")
                    td(data-title=" 'Nome' ", sortable="'SLD_TIPO'", filter="{ 'SLD_TIPO': 'text' }")
                      a(ng-click="viewDoc( doc.SLD_LINK , dados.SLP_STATUS.MG)") {{doc.SLD_TIPO}}
                    td.text-center(data-title=" 'Data' ", sortable="'SLD_DATA'", filter="{ 'SLD_DATA': 'text' }") {{doc.SLD_DATA ? (doc.SLD_DATA | date:'dd/MM/yyyy') : "---"}}
      // DOCS END

      //POLL VIEW START
      .col-md-12(ng-if="billVotingList != '' ")
        .panel.widget.bill-box
          .panel-heading
            h3 Votações
          .panel-body
            p(ng-if="billVotingList.length == 0") Não há votações para este projeto de lei.

            .p-sm(ng-repeat="poll in billVotingList" ng-init="resultado = poll.SLV_RESULTADO" ng-class="$even ? 'custom-stripe' : ''")
              .form-horizontal.m0
                .form-group.m0
                  .col-sm-3.control-label-sm.m0
                    label Data:
                  .col-sm-9.form-control-static-sm {{poll.SLV_DATA_HORA.replace(" ", "T") | date:"dd/MM/yyyy 'às' HH:mm"}}
                .form-group.m0
                  .col-sm-3.control-label-sm.m0
                    label Objeto:
                  .col-sm-9.form-control-static-sm {{poll.SLV_OBJETO_VOTACAO}}
                .form-group.m0
                  .col-sm-3.control-label-sm.m0
                    label Resultado:
                  .col-sm-9.form-control-static-sm.m0
                    a.btn(ui-sref="app.bill.pollDetails({pollID: poll.id})", ng-class="resultado == 'Aprovado' ? 'bg-success' : 'bg-danger' ") {{poll.SLV_RESULTADO}}
      //POLL VIEW END
      .col-md-12
        .panel.widget.bill-box
          .panel-heading
            h3 Comentários
          .panel-body
            .panel(ng-repeat="note in notes | orderBy: 'note.date'  ")
              .panel-heading.bg-gray-light
                h4 {{note.user}} -&nbsp;
                  small {{ timePast(note.date) }}
              .panel-body
                p(ng-bind-html="note.content")
            form.form-validate.mb-lg(role='form', name="noteForm", novalidate='', ng-submit="pushNote(noteContent)")
              textarea.form-control(ng-model="noteContent", name="noteContent", rows="4", required, placeholder="Deixe um comentário")
              button.btn.btn-success.form-control(type="submit") OK
      // END table-responsive
    // END panel
