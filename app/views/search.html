<div ng-controller="searchResults" data-ng-init="init()">
   <div class="col-lg-3 col-md-3">
      <div class="panel panel-default">
         <div class="panel-heading">
            <h3>Filtros</h3>
         </div>
         <div class="panel-body">
            <!--filtro por casas legislativas-->
            <div class="form-group mb-xl">
               <label class="control-label mb">Casas Legislativas</label>
               <br/>
               <label class="checkbox-inline c-checkbox">
                  <input type="checkbox" ng-model="checkedHouses.CN" ng-click="changeFilterHouses()" />Congresso Nacional
                  <span class="pull-left fa fa-check"></span>
               </label>
               <br/>
               <label class="checkbox-inline c-checkbox">
                  <input type="checkbox" ng-model="checkedHouses.SP" ng-click="changeFilterHouses()" />São Paulo
                  <span class="pull-left fa fa-check"></span>
               </label>
               <br/>
               <label class="checkbox-inline c-checkbox">
                  <input type="checkbox" ng-model="checkedHouses.MG" ng-click="changeFilterHouses()" />Minas Gerais
                  <span class="pull-left fa fa-check"></span>
               </label>
               <br/>
            </div>
            <div class="form-group mb-xl">
               <label class="control-label mb">Tipo de Proposição</label>
               <br/>
               <label class="checkbox-inline c-checkbox">
                  <input type="checkbox" ng-model="billTypes.PL" ng-click="changeFilterBillTypes()" />Projeto de Lei Ordinário
                  <span class="pull-left fa fa-check"></span>
               </label>
               <br/>
               <label class="checkbox-inline c-checkbox">
                  <input type="checkbox" ng-model="billTypes.PLComp" ng-click="changeFilterBillTypes()" />Projeto de Lei Complementar
                  <span class="pull-left fa fa-check"></span>
               </label>
               <br/>
               <label class="checkbox-inline c-checkbox">
                  <input type="checkbox" ng-model="billTypes.MPV" ng-click="changeFilterBillTypes()" />Medida Provisoria
                  <span class="pull-left fa fa-check"></span>
               </label>
               <br/>
               <label class="checkbox-inline c-checkbox">
                  <input type="checkbox" ng-model="billTypes.PLN" ng-click="changeFilterBillTypes()" />Projeto de Lei Nacional
                  <span class="pull-left fa fa-check"></span>
               </label>
               <br/>
               <label class="checkbox-inline c-checkbox">
                  <input type="checkbox" ng-model="billTypes.PEC" ng-click="changeFilterBillTypes()" />Emenda Constitucional
                  <span class="pull-left fa fa-check"></span>
               </label>
               <br/>
            </div>
            <div class="form-group mb-xl">
               <label class="control-label mb">Temas</label>
               <select ng-model="themeSelected" class="form-control">
                  <option value="" selected="selected">Todos</option>
                  <option ng-repeat="object in themesAndSubthemes">{{object.tema}}</option>
               </select>
            </div>
            <div ng-hide="themeSelected == '' " class="form-group mb-xl">
               <label class="control-label mb">Subtemas</label>
               <select ng-model="subthemeSelected" class="form-control">
                  <option value="" selected="selected">Todos</option>
                  <option ng-repeat="subtheme in getSubthemes(themeSelected)" value="{{subtheme}}">{{subtheme}}</option>
               </select>
            </div>
            <div class="form-group mb-xl">
               <label class="control-label mb">Ano</label>
               <br/>
               <p class="input-group">
                  <input type="number" min="1980" max="2015" ng-model="year" ng-change="changeFilterYear()" class="form-control" />
               </p>
            </div>
            <div class="form-group mg-xl"></div>
            <button ng-click="cleanFilters()" class="btn btn-md btn-default">Limpar Filtros</button>
         </div>
      </div>
   </div>
   <!--END filters-->
   <div class="col-lg-9 col-md-12 col-sm-12">
      <!-- START panel-->
      <div class="panel panel-default">
         <div class="panel-heading">
            <paneltool tool-refresh="standard"></paneltool>
            <h3 ng-if="fetching">Buscando</h3>
            <h3 ng-if="!fetching">Resultados da busca
               <small ng-if="query != &quot;&quot; ">por "{{query}}"</small>
            </h3>
            <p ng-if="!fetching">{{total_results}} projetos de lei encontrados</p>
         </div>
         <!-- START table-responsive-->
         <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover">
               <thead>
                  <tr>
                     <th>Descrição
                        <label class="control-label mb pull-right">Ordernar por:
                           <select ng-model="orderedBy">
                              <option value="1">Data</option>
                              <option value="2">Relevância</option>
                           </select>
                        </label>
                     </th>
                  </tr>
               </thead>
               <tbody>
                  <tr ng-repeat="bill in bills">
                     <td>
                        <div class="media-box">
                           <div class="media-box-body">
                              <a ng-href="#/app/proposicao?p={{bill.fields.SLP_NOME}}">
                                 <h4 class="media-box-heading">{{bill.fields.SLP_NOME}}</h4>
                              </a>
                              <small ng-if="bill.fields.SLR_NOME != undefined" class="text-muted">Outros Nomes: {{bill.fields.SLR_NOME}}</small>
                              <br ng-if="bill.fields.SLR_NOME != undefined" />
                              <small class="text-muted">Autor:
                                 <!--one author and doesn't have id-->
                                 <strong ng-if="parseAuthor(bill.fields.SLP_AUTOR).id === undefined">{{parseAuthor(bill.fields.SLP_AUTOR).name}}</strong>
                                 <!--one author and has id-->
                                 <strong ng-if="getMainAuthor(bill.fields.SLP_AUTOR).id != undefined"><a ng-href="#/app/parlamentar?id={{getMainAuthor(bill.fields.SLP_AUTOR).id}}">{{getMainAuthor(bill.fields.SLP_AUTOR).name}}</a>
                                 </strong>
                                 <!--get other authors-->
                                 <strong ng-if="getMainAuthor(bill.fields.SLP_AUTOR).length != undefined">e <a ng-click="showOtherAuthors = !showOtherAuthors">{{getMainAuthor(bill.fields.SLP_AUTOR).length}} outros</a>
                                    <div collapse="!showOtherAuthors">
                                       <strong ng-repeat="author in bill.fields.SLP_AUTOR" ng-show="! $last">
                                          <strong ng-if="parseAuthor(author).id === undefined">{{parseAuthor(author).name}}</strong>
                                          <strong ng-if="parseAuthor(author).id != undefined"><a ng-href="#/app/parlamentar?id={{parseAuthor(author).id}}">{{parseAuthor(author).name}}</a>
                                          </strong>
                                          <span ng-show="$index != bill.fields.SLP_AUTOR.length - 2">,</span>
                                       </strong>
                                    </div>
                                 </strong>
                                 <br/>
                              </small>
                              <small class="text-muted">Última atualização: {{toDate(bill.fields.SLP_DATA_ATUALIZACAO) | date:"dd/MM/yyyy"}}</small>
                              <br/>
                              <small class="text-muted">Tema: {{bill.fields.SLP_TEMA}}</small>
                              <p>{{bill.fields.SLP_EMENTA}}</p>
                           </div>
                        </div>
                     </td>
                  </tr>
                  <tr ng-if="fetching">
                     <td>
                        <p>Carregando...</p>
                     </td>
                  </tr>
                  <tr>
                     <td>
                        <button ng-click="moreResults()" ng-show="bills.length &lt; total_results" class="btn btn-block btn-default">Carregar Mais resultados</button>
                     </td>
                  </tr>
               </tbody>
            </table>
            <!-- END table-responsive-->
         </div>
         <!-- END panel-->
      </div>
   </div>
</div>